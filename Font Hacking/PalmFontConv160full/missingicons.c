#include <string.h>

typedef struct {
  char** icon;
  int    height;
} IconType;

char* card1[] = {
"#",
};

char* card2[] = {
"##",
"##",
};

char* card3[] = {
"-##",
"-##",
"-#-",
};

char* card4[] = {
"-###",
"-#-#",
"-#-#",
"-##-",
};

char* card6[] = {
"-####",
"-#--#",
"-#--#",
"-#--#",
"-#--#",
"-###-",
};

char* card7[] = {
"-######",
"-#----#",
"-#----#",
"-#----#",
"-#----#",
"-#----#",
"-#####-",
};

char* card9[] = {
"-#######",
"-#---#-#",
"-#---#-#",
"-#---#-#",
"-#---#-#",
"-#####-#",
"-#-----#",
"-#-----#",
"-######-",
};

char* card10[] = {
"-########",
"-#---#--#",
"-#---#--#",
"-#---#--#",
"-#---#--#",
"-#---#--#",
"-#####--#",
"-#------#",
"-#-----#-",
"-######--",
};

char* card13[] = {
"----------",
"-#########",
"-#----#--#",
"-#----#--#",
"-#----#--#",
"-#----#--#",
"-#----#--#",
"-#----#--#",
"-#----#--#",
"-######--#",
"-#-------#",
"-#------#-",
"-#######--",
};

char* card14[] = {
"-----------",
"-##########",
"-#-----#--#",
"-#-----#--#",
"-#-----#--#",
"-#-----#--#",
"-#-----#--#",
"-#-----#--#",
"-#-----#--#",
"-#-----#--#",
"-#######--#",
"-#-------#-",
"-#------#--",
"-#######---",
};

char* card15[] = {
"------------",
"-###########",
"-#------#--#",
"-#------#--#",
"-#------#--#",
"-#------#--#",
"-#------#--#",
"-#------#--#",
"-#------#--#",
"-#------#--#",
"-#------#--#",
"-########--#",
"-#--------#-",
"-#-------#--",
"-########---",
};

char* card17[] = {
"-------------",
"-############",
"-##-----#--##",
"-##-----#--##",
"-##-----#--##",
"-##-----#--##",
"-##-----#--##",
"-##-----#--##",
"-##-----#--##",
"-##-----#--##",
"-##-----#--##",
"-##-----#--##",
"-#######---##",
"-##--------##",
"-##-------##-",
"-##------##--",
"-#########---",
};

char* card19[] = {
"--------------",
"-#############",
"-#############",
"-##------#--##",
"-##------#--##",
"-##------#--##",
"-##------#--##",
"-##------#--##",
"-##------#--##",
"-##------#--##",
"-##------#--##",
"-##------#--##",
"-##------#--##",
"-##------#--##",
"-########---##",
"-##---------##",
"-##--------##-",
"-###########--",
"-##########---",
};

char* card22[] = {
"---------------",
"---------------",
"-##############",
"-##############",
"-##------##--##",
"-##------##--##",
"-##------##--##",
"-##------##--##",
"-##------##--##",
"-##------##--##",
"-##------##--##",
"-##------##--##",
"-##------##--##",
"-##------##--##",
"-##------##--##",
"-##########--##",
"-#########---##",
"-##----------##",
"-##---------##-",
"-##--------##--",
"-###########---",
"-##########----",
};

char* card24[] = {
"-----------------",
"-----------------",
"-################",
"-################",
"-##--------##--##",
"-##--------##--##",
"-##--------##--##",
"-##--------##--##",
"-##--------##--##",
"-##--------##--##",
"-##--------##--##",
"-##--------##--##",
"-##--------##--##",
"-##--------##--##",
"-##--------##--##",
"-##--------##--##",
"-##--------##--##",
"-###########---##",
"-##########----##",
"-##------------##",
"-##-----------##-",
"-##----------##--",
"-#############---",
"-############----",
};

IconType cardIcons[] = {
   { card1, 1 },
   { card2, 2 },
   { card3, 3 },
   { card4, 4 },
   { card6, 6 },
   { card7, 7 },
   { card9, 9 },
   { card10, 10 },
   { card13, 13 },
   { card14, 14 },
   { card15, 15 },
   { card17, 17 },
   { card19, 19 },
   { card22, 22 },
   { card24, 24 }
};

char* stroke1[] = {
   "#-"
};

char* stroke2[] = {
   "-#",
   "#-"
};

char* stroke3[] = {
   "--#",
   "##-",
   "##-"
};

char* stroke4[] = {
   "---#",
   "--#-",
   "##--",
   "##--"
};

char* stroke6[] = {
   "-----#",
   "----#-",
   "---#--",
   "--#---",
   "##----",
   "##----"
};

char* stroke7[] = {
   "------#-",
   "-----#--",
   "----#---",
   "---#----",
   "--#-----",
   "##------",
   "##------",
};

char* stroke8[] = {
   "-------#-",
   "------#--",
   "-----#---",
   "----#----",
   "---#-----",
   "--#------",
   "##-------",
   "##-------",
};

char* stroke10[] = {
   "---------#-",
   "--------#--",
   "-------#---",
   "------#----",
   "-----#-----",
   "----#------",
   "---#-------",
   "--#--------",
   "##---------",
   "##---------",
};

char* stroke12[] = {
   "-------------",
   "----------##-",
   "---------##--",
   "--------##---",
   "-------##----",
   "------##-----",
   "-----##------",
   "----##-------",
   "---##--------",
   "--##---------",
   "###----------",
   "###----------",
};

char* stroke14[] = {
   "--------------",
   "-----------##-",
   "----------##--",
   "---------##---",
   "--------##----",
   "-------##-----",
   "------##------",
   "-----##-------",
   "----##--------",
   "---##---------",
   "-###----------",
   "####----------",
   "####----------",
   "-##-----------",
};

char* stroke16[] = {
   "----------------",
   "----------------",
   "-------------##-",
   "------------##--",
   "-----------##---",
   "----------##----",
   "---------##-----",
   "--------##------",
   "-------##-------",
   "------##--------",
   "-----##---------",
   "----##----------",
   "--###-----------",
   "-####-----------",
   "-####-----------",
   "--##------------",
};

char* stroke18[] = {
   "------------------",
   "------------------",
   "---------------##-",
   "--------------##--",
   "-------------##---",
   "------------##----",
   "-----------##-----",
   "----------##------",
   "---------##-------",
   "--------##--------",
   "-------##---------",
   "------##----------",
   "-----##-----------",
   "--####------------",
   "-#####------------",
   "-#####------------",
   "-#####------------",
   "--###-------------",
};

char* stroke20[] = {
   "---------------------",
   "---------------------",
   "-----------------##--",
   "----------------##---",
   "---------------##----",
   "--------------##-----",
   "-------------##------",
   "------------##-------",
   "-----------##--------",
   "----------##---------",
   "---------##----------",
   "--------##-----------",
   "-------##------------",
   "------##-------------",
   "-----##--------------",
   "--####---------------",
   "-#####---------------",
   "-#####---------------",
   "-#####---------------",
   "--###----------------",
};

char* stroke21[] = {
   "----------------------",
   "----------------------",
   "------------------##--",
   "-----------------##---",
   "----------------##----",
   "---------------##-----",
   "--------------##------",
   "-------------##-------",
   "------------##--------",
   "-----------##---------",
   "----------##----------",
   "---------##-----------",
   "--------##------------",
   "-------##-------------",
   "------##--------------",
   "-----##---------------",
   "--####----------------",
   "-#####----------------",
   "-#####----------------",
   "-#####----------------",
   "--###-----------------",
};

char* stroke23[] = {
   "------------------------",
   "------------------------",
   "-------------------##---",
   "------------------###---",
   "-----------------###----",
   "----------------###-----",
   "---------------###------",
   "--------------###-------",
   "-------------###--------",
   "------------###---------",
   "-----------###----------",
   "----------###-----------",
   "---------###------------",
   "--------###-------------",
   "-------###--------------",
   "------###---------------",
   "-----###----------------",
   "----###-----------------",
   "--####------------------",
   "-#####------------------",
   "-#####------------------",
   "-#####------------------",
   "--###-------------------",
};

IconType strokeIcons[] = {
   { stroke1, 1 },
   { stroke2, 2 },
   { stroke3, 3 },
   { stroke4, 4 },
   { stroke6, 6 },
   { stroke7, 7 },
   { stroke8, 8 },
   { stroke10, 10 },
   { stroke12, 12 },
   { stroke14, 14 },
   { stroke16, 16 },
   { stroke18, 18 },
   { stroke20, 20 },
   { stroke21, 21 },
   { stroke23, 23 }
};

char* squiggle1[] = {
"#-"
};

char* squiggle2[] = {
"###-",
"#-#-",
};

char* squiggle3[] = {
"####",
"-##-",
"#--#",
};

char* squiggle4[] = {
"####",
"#--#",
"-##-",
"#--#",
};

char* squiggle5[] = {
"-###-",
"#---#",
"#---#",
"-###-",
"#---#",
};

char* squiggle7[] = {
"------",
"--###-",
"-#---#",
"-#---#",
"--###-",
"-#---#",
"-#---#",
};

char* squiggle9[] = {
"-------",
"-------",
"--####-",
"-#----#",
"-#----#",
"-#----#",
"--####-",
"-##--##",
"-#----#",
};

char* squiggle10[] = {
"--------",
"--------",
"--#####-",
"-##---##",
"-##---##",
"-##---##",
"--#---#-",
"---###--",
"-##---##",
"-##---##",
};

char*  squiggle11[] = {
"----------",
"----------",
"--######--",
"-##----##-",
"-##----##-",
"-##----##-",
"--##--##--",
"---####---",
"--##--##--",
"-##----##-",
"-##----##-",
};

char* squiggle12[] = {
"-----------",
"-----------",
"---#####---",
"--##---##--",
"-##-----##-",
"-##-----##-",
"-##-----##-",
"--##---##--",
"---#####---",
"--##---##--",
"-##-----##-",
"-##-----##-",
};

char* squiggle14[] = {
"------------",
"------------",
"------------",
"---#####----",
"--##---##---",
"-##-----##--",
"-##-----##--",
"-##-----##--",
"--##---##---",
"---#####----",
"--##----##--",
"-##------##-",
"-##------##-",
"-##------##-",
};

char* squiggle15[] = {
"-------------",
"-------------",
"-------------",
"---#####-----",
"--##---##----",
"-##-----##---",
"-##-----##---",
"-##-----##---",
"-##-----##---",
"--##---##----",
"---#####-----",
"--##----##---",
"-##------##--",
"-##------##--",
"-##------##--",
};

char* squiggle16[] = {
"--------------",
"--------------",
"--------------",
"---######-----",
"--##----##----",
"-##------##---",
"-##------##---",
"-##------##---",
"-##------##---",
"-###-----##---",
"--##----##----",
"---######-----",
"--###---##----",
"-###-----##---",
"-##-------##--",
"-##-------##--",
};

char* squiggle17[] = {
"---------------",
"---------------",
"---------------",
"---------------",
"-----#####-----",
"---###---###---",
"--###-----###--",
"--###-----###--",
"--###-----###--",
"--###-----###--",
"---##-----##---",
"---###---###---",
"-----#####-----",
"---###---###---",
"--###-----###--",
"-###-------###-",
"-###-------###-",
};

char* squiggle19[] = {
"----------------",
"----------------",
"----------------",
"----------------",
"-----######-----",
"----##----###---",
"---###----###---",
"--###------###--",
"--###------###--",
"--###------###--",
"--###------###--",
"---###----###---",
"----###---##----",
"-----######-----",
"---###----###---",
"--###------###--",
"-###--------###-",
"-###--------###-",
"-###--------###-",
};

char* squiggle20[] = {
"-----------------",
"-----------------",
"-----------------",
"-----------------",
"-----######------",
"----##----##-----",
"---###----###----",
"--###------###---",
"--###------###---",
"--###------###---",
"--###------###---",
"--###------###---",
"---###----###----",
"----###---##-----",
"-----######------",
"---###----###----",
"--###------###---",
"--##--------###--",
"-###--------###--",
"-###--------###--",
};

char* squiggle21[] = {
"------------------",
"------------------",
"------------------",
"------------------",
"------######------",
"----###---###-----",
"---###-----###----",
"--###-------###---",
"--###-------###---",
"--###-------###---",
"--###-------###---",
"--###-------###---",
"---###-----###----",
"----###---###-----",
"-----#######------",
"---###-----###----",
"--###-------###---",
"--###-------###---",
"-###---------###--",
"-###---------###--",
"-###---------###--",
};

char* squiggle23[] = {
"------------------",
"------------------",
"------------------",
"------------------",
"------######------",
"----###---###-----",
"---###-----###----",
"--###-------###---",
"--###-------###---",
"--###-------###---",
"--###-------###---",
"--###-------###---",
"--###-------###---",
"---###-----###----",
"----###---###-----",
"-----#######------",
"---###-----###----",
"--###-------###---",
"--###-------###---",
"-###---------###--",
"-###---------###--",
"-###---------###--",
"-###---------###--",
};

IconType squiggleIcons[] =
{
   { squiggle1, 1 },
   { squiggle2, 2 },
   { squiggle3, 3 },
   { squiggle4, 4 },
   { squiggle5, 5 },
   { squiggle7, 7 },
   { squiggle9, 9 },
   { squiggle10, 10 },
   { squiggle11, 11 },
   { squiggle12, 12 },
   { squiggle14, 14 },
   { squiggle15, 15 },
   { squiggle16, 16 },
   { squiggle17, 17 },
   { squiggle19, 19 },
   { squiggle20, 20 },
   { squiggle21, 21 },
   { squiggle23, 23 }
};

typedef struct {
   int       charNum;
   IconType* icons;
   int       count;
} IconFamilyType;

IconFamilyType icons[] = {
   { 26, cardIcons, sizeof cardIcons / sizeof *cardIcons },
   { 22, strokeIcons, sizeof strokeIcons / sizeof *strokeIcons },
   { 23, squiggleIcons, sizeof squiggleIcons / sizeof *squiggleIcons }
};

#define NUM_ICONS ( sizeof icons / sizeof *icons )

char** FindIcon( int ch, int* widthP, int height, int* numLines, int forHalf, int forceEven )
{
    int i;
    int dWidth;
    IconFamilyType* f;

    if ( height < 1 )
        return NULL;

    for ( i = 0 ; i < NUM_ICONS ; i++ )
        if ( icons[ i ].charNum == ch )
            break;

    if ( i == NUM_ICONS )
        return NULL;

    f = &( icons[ i ] );

    if ( forHalf ) {
        dWidth  = 2 * *widthP;
        if ( NULL == FindIcon( ch, &dWidth, 2 * height, NULL, 0, 1 ) )
            return NULL;
        *widthP  = dWidth / 2;
//        fprintf(stderr,"Fixed width: (%d):%d\n",ch,dWidth / 2 );
    }

    for ( i = 1 ; i < f->count ; i++ ) {
        if ( height < f->icons[ i ].height )
            break;
    }

    i--;

    if ( *widthP ) {
        while ( 0 < i && *widthP < strlen( f->icons[ i ].icon[ 0 ] ) )
            i--;
        if ( i < 0 )
            return NULL;
    }
    else {
    /* ARP: should check for forceEven here, no? */
        *widthP = ( strlen( f->icons[ i ].icon[ 0 ] ) + 1 ) / 2 * 2;
    }

    if ( NULL != numLines )
        *numLines = f->icons[ i ].height;          \

//    fprintf( stderr, ">> %d, %d\n", ch, *widthP );

    return f->icons[ i ].icon;
}
